!function n(t,e,r){function o(u,c){if(!e[u]){if(!t[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var d=e[u]={exports:{}};t[u][0].call(d.exports,function(n){var e=t[u][1][n];return o(e?e:n)},d,d.exports,n,t,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t,e){(function(r){"use strict";!function(n,r){"object"==typeof e?t.exports=r(n):"function"==typeof define&&define.amd?define(r):n=r(n)}(r.window,function(t){function e(n,t){this.fn=n,this.receivers="undefined"!=typeof t?t:[]}function r(n){return function(t){var r=e.make(),o=n.addInput(r),i={signal:r,send:function(t){n.async(function(){n.notify(o,t)})}};return i.send(t),i}}function o(n){var t=function(t){var r=e.make(),o=n.addInput(r);return n.ports[t]={send:function(t){n.notify(o,t)}},r},r=function(t){var r=e.make();return n.ports[t]={listen:function(n){r.recv(n)}},r};return{inbound:t,outbound:r}}function i(n){function t(n,e,r){this.content=n,this.children=e,this.type=r,this.type===t.Text?this.key=this.content:"undefined"!=typeof this.content.attrs.id?this.key=this.content.attrs.id:this.key=null}function e(n){if(null===n)return null;if(n.type===t.Text)return document.createTextNode(n.content);var r=document.createElement(n.content.tag);for(var o in n.content.attrs)r.setAttribute(o,n.content.attrs[o]);for(var i=0;i<n.children.length;i++){var u=e(n.children[i]);r.appendChild(u)}return n.mailbox&&n.mailbox.send(r),r}function r(t){for(var r=n.domRoot,o=e(t);r.firstChild;)r.removeChild(r.firstChild);r.appendChild(o)}function o(n,r,i){if("undefined"==typeof r||null==r)return void(i&&i.parentNode.removeChild(i));if("undefined"==typeof n||null==n)return void i.appendChild(e(r));if(r.type===t.Node)if(n.type===t.Node)if(n.content.tag===r.content.tag){for(var u in r.content.attrs)i[u]=r.content.attrs[u],i.setAttribute(u,r.content.attrs[u]);for(var c in n.content.attrs)c in r.content.attrs||i.removeAttribute(c);for(var f=n.children.length,a=r.children.length,d=f>a?f:a,s=new Array,p=0;p<d;p++)s.push(i.childNodes[p]);for(var l=0;l<d;l++){var v=n.children[l],m=r.children[l];v?o(v,m,s[l]):o(null,m,i)}}else{var y=i.parentNode;y.insertBefore(e(r),i),y.removeChild(i)}else{var h=i.parentNode;h.insertBefore(e(r),i),h.removeChild(i)}else{var k=i.parentNode;k.insertBefore(e(r),i),k.removeChild(i)}}var i={};return t.prototype={subscribe:function(n){return this.mailbox=n,this},keyEq:function(n){var t=this;return null!=t.key&&null!=n.key&&t.key===n.key}},t.Text=0,t.Node=1,i.el=function(n,e,r){var o="undefined"==typeof r?[]:r.map(function(n){return"string"==typeof n?new t(n,[],t.Text):n});return new t({tag:n,attrs:e},o,t.Node)},i.render=function(t){t.reduce(null,function(t,e){var i=n.domRoot;return null===e?r(t):o(e,t,i.firstChild),t}).done()},i}function u(n){this.runApp=n}function c(n){return new u(function(t){if(t)for(var e in t)e in n||(n[e]=t[e]);return{value:void 0,runtime:Object.freeze(n)}})}function f(n){function t(t,e){var r=n.addInput(e);n.addListener([e],n.eventRoot,t,function(t){n.notify(r,t)})}var r={mouse:{click:e.make(),dblclick:e.make()},keyboard:{keypress:e.make(),keydown:e.make(),keyup:e.make(),blur:e.make(),focusout:e.make()},input:e.make(),change:e.make(),load:e.make()};return t("click",r.mouse.click),t("dblclick",r.mouse.dblclick),t("keypress",r.keyboard.keypress),t("keydown",r.keyboard.keydown),t("keyup",r.keyboard.keyup),t("focusout",r.keyboard.focusout),t("blur",r.keyboard.blur),t("input",r.input),t("change",r.change),t("load",r.load),r}var a=n("./loeb.js"),d=a.instance,s=a.Functor,p=a.Monad,l=(a.constant,a.id,a.guid_factory);t.loeb=a;t.guid=l();return e.make=function(){return new e(function(n){return n},[])},e.constant=function(n){return new e(function(t){return n})},e.output=function(n){var t=new e(function(t){n(t)},[]);return t.isOutput=!0,t},e.prototype={send:function(n,t){var e=this.fn(t);if(void 0!==e&&!this.isOutput)for(var r=this.receivers.length;r--;)this.receivers[r].send(n,e)},connect:function(n){return this.receivers.push(n),this},addReceivers:function(n){this.receivers.concat(n)},receive:function(n){return n.receivers.push(this),this},filter:function(n){var t=new e(function(t){if(n(t))return t});return this.connect(t),t},reduce:function(n,t){var r=n,o=new e(function(n){return r=t(n,r)});return this.connect(o),o},map:function(n){var t=new e(function(t){return n(t)});return this.connect(t),t},recv:function(n){var t=new e.output(n);return this.connect(t),t},done:function(){return this}},t.Signal={make:e.make,output:e.output,constant:e.constant},t.App=u,u.of=function(n){var t="undefined"!=typeof n?n:null;return new u(function(n){return{value:t,runtime:n}})},u.save=c,u.init=function(n){function t(n,t){return window.setTimeout(n,t)}function e(n){return window.setTimeout(n,0)}function u(n,t,e,r){t.addEventListener(e,r,!0);var o={whichInputs:n,dom:t,evtName:e,fn:r};v.push(o)}function a(n,t){if(k)throw new Error("Update already in progress!");k=!0;var e=h.now();m[n].send(e,t),k=!1}function d(n){var t=m.length;return m.push(n),t}function s(n){return document.getElementById(n)}function p(){for(var n=v.length-1;n>=0;n--){for(var t=v[n],e=0,r=0;r<t.whichInputs.length;r++){var o=t.whichInputs[r];0===o.receivers.length&&e++}t.whichInputs.length===e&&(l.eventRoot.removeEventListener(t.evtName,t.fn),v.splice(n,1))}}var l=void 0;if("undefined"==typeof n)l={domRoot:document.body,eventRoot:document,gui:!0};else if("string"==typeof n)l={domRoot:document.getElementById(n),eventRoot:document.getElementById(n),gui:!0};else{if("object"!=typeof n)throw new Exception("Invalid configuration value!");l=n,l.domRoot="undefined"==typeof n.domRoot?document.body:document.getElementById(l.domRoot),l.eventRoot="undefined"==typeof n.eventRoot?document:document.getElementById(l.eventRoot),l.gui="undefined"==typeof n.gui||n.gui}var v=[],m=[],y={},h={programStart:Date.now(),now:function(){return Date.now()}},k=!1,g=r({addInput:d,async:e,notify:a}),b=null;l.gui&&(b=i({byId:s,domRoot:l.domRoot,mailbox:g}));var w=o({addInput:d,ports:y,notify:a,mailbox:g}),R=f({addInput:d,eventRoot:l.eventRoot,addListener:u,notify:a});return c({gui:l.gui,domRoot:l.domRoot,eventRoot:l.eventRoot,timer:h,addInput:d,addListener:u,notify:a,setTimeout:t,events:R,async:e,mailbox:g,byId:s,port:w,vdom:b,ports:y,prune:p,scope:{}})},u.prototype={map:function(n){var t=this;return new u(function(e){var r=t.runApp(e);return{value:n(r.value),runtime:r.runtime}})},flatten:function(){var n=this;return new u(function(t){var e=n.runApp(t),r=e.value.runApp(e.runtime);return r})},runtime:function(n){return this.then(function(n){return new u(function(n){return{value:n,runtime:n}})}).then(n)},setup:function(n){return this.runtime(function(t){return c(n(t))})},main:function(n){return this.runtime(function(t){var e={events:t.events,async:t.async,setTimeout:t.setTimeout,byId:t.byId,mailbox:t.mailbox,port:t.port,scope:t.scope,el:t.vdom.el,timer:t.timer},r=n(e);return t.gui&&t.vdom.render(r),t.prune(),c(e)})},start:function(){var n=this.runApp().runtime;return{ports:n.ports,scope:n.scope}}},d(u,s),d(u,p),t})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./loeb.js":2}],2:[function(n,t,e){"use strict";!function(n,r){"object"==typeof e?t.exports=r(n):"function"==typeof define&&define.amd?define(r):n=r(n)}(this,function(n){var t=n.memothunk=function(n){var t,e=!1;return function(){return e?t:(e=!0,t=n())}},e=(n.constant=function(n){return function(){return n}},n.id=function(n){return n},n.compose=function(n,t){return function(e){return n(t(e))}},n.guid_factory=function(){var n=0;return function(){return n++}},n.instance=function(n,t){for(var e in t.prototype)n.prototype[e]=t.prototype[e]}),r=n.Functor=function(){};r.prototype={force:function(){return this.map(function(n){return n()})},delay:function(){return this.map(function(n){return t(function(){return n})})}};var o=n.Monad=function(){};o.prototype.flatMap=o.prototype.then=function(n){return this.map(n).flatten()},o.prototype.then=o.prototype.flatMap;n.flatten=function(n){return n.flatten()};o.prototype.ap=function(n){var t=this;return t.flatMap(function(e){return n.flatMap(function(n){return t.constructor.of(e(n)).delay()})})},Array.prototype.flatten=function(){return this.reduce(function(n,t){return n.concat(t)},[])},Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)}),e(Array,r),e(Array,o);var i=n.Comonad=function(){};return i.prototype.convolve=function(n){return this.duplicate().map(n)},n})},{}]},{},[1]);