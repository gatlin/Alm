!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t){var e=Object.keys(t);return function(n,i){for(var r=!1,o={},u=0;u<e.length;u++){var s=e[u],a=t[s],d=n[s],c=a(d,i);o[s]=c,r=r||c!==d}return r?o:n}}function r(t,e,n){return void 0===e&&(e={}),void 0===n&&(n=[]),function(i){var r={};e.on&&(r=e.on,delete e.on);var o=n.map(function(t,e){return"string"==typeof t?new s.VDom(t,[],s.VDomType.Text):t(i)}),u=function(t){return i.handle(t,r)};return"string"==typeof t?new s.VDom({tag:t,attrs:e},o,s.VDomType.Node,u):t(e)(i)}}function o(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),function(n){return function(i){return void 0===i&&(i={}),function(r){var o=r.store,s=o.getState(),a=t?t(s):{},d=e?e(o.dispatch.bind(o)):{},c=u({},i,a,d);return n(c)(r)}}}}var u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(3);e.makeReducer=i;var a=function(){function t(t,e){this.state=t,this.reducer=e,this.subscribers=[]}return t.prototype.dispatch=function(t){return this.state=this.reducer(this.state,"function"==typeof t?t(this.dispatch.bind(this),this.getState.bind(this)):t),this.subscribers.forEach(function(t){t()}),this},t.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){var n=e.subscribers.indexOf(t);e.subscribers.splice(n,1)}},t.prototype.getState=function(){return Object.seal(this.state)},t}();e.Store=a,e.el=r;var d=function(){function t(t){this.raw=t,this.classes=t.target.className.trim().split(/\s+/g)||[],this.id=t.target.id||"",this.value=t.target.value}return t.prototype.hasClass=function(t){return-1!==this.classes.indexOf(t)},t.prototype.getClasses=function(){return this.classes},t.prototype.getId=function(){return this.id},t.prototype.getValue=function(){return this.value},t.prototype.getRaw=function(){return this.raw},t.prototype.class_in_ancestry=function(t){for(var e=null,n=!1,i=this.raw.target;!n;){if(!i.className){n=!0;break}-1!==(i.className.trim().split(/\s+/g)||[]).indexOf(t)?(e=i,n=!0):i.parentNode?i=i.parentNode:n=!0}return e},t}();e.AlmEvent=d;var c=function(){function t(t){this.gensymnumber=0,this.store=new a(t.model,t.update),this.eventRoot="string"==typeof t.eventRoot?document.getElementById(t.eventRoot):void 0===t.eventRoot?document:t.eventRoot,this.domRoot="string"==typeof t.domRoot?document.getElementById(t.domRoot):t.domRoot,this.view=t.view,this.events={}}return t.prototype.start=function(){var t=this;this.events={};var e=this.store,n=function(e,n){var i;e.hasAttribute("data-alm-id")?i=e.getAttribute("data-alm-id"):(i=t.gensym(),e.setAttribute("data-alm-id",i));for(var r in n)r in t.events||(t.events[r]={},t.registerEvent(r,t.handleEvent)),t.events[r][i]=n[r];return function(){for(var e in n)delete t.events[e][i]}},i={store:e,handle:n},r=this.view(i);s.initialDOM(this.domRoot,r),this.store.subscribe(function(){var e=t.view(i);s.diff_dom(t.domRoot,r,e),r=e})},t.prototype.handleEvent=function(t){var e=t.type;if(this.events[e]&&t.target.hasAttribute("data-alm-id")){var n=t.target.getAttribute("data-alm-id");this.events[e][n]&&this.events[e][n](new d(t))}},t.prototype.gensym=function(){return"node-"+(this.gensymnumber++).toString()},t.prototype.registerEvent=function(t,e){this.eventRoot.addEventListener(t,e.bind(this),!0)},t}();e.Alm=c,e.connect=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;!function(t){t[t.Add=0]="Add",t[t.Delete=1]="Delete",t[t.Complete=2]="Complete",t[t.Editing=3]="Editing",t[t.UpdateTask=4]="UpdateTask",t[t.UpdateField=5]="UpdateField"}(i=e.Actions||(e.Actions={})),e.add=function(){return{type:i.Add}},e.delete_=function(t){return{type:i.Delete,data:t}},e.toggle=function(t){return{type:i.Complete,data:t}},e.edit=function(t){return{type:i.Editing,data:t}},e.update=function(t){return{type:i.UpdateTask,data:t}},e.updateField=function(t){return{type:i.UpdateField,data:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=n(5),u=n(11),s=new i.Alm({model:r.initialState,update:u.default,view:o.default(),domRoot:"main",eventRoot:"main"});document.title="Todo List",s.store.subscribe(function(){var t=s.store.getState().tasks.filter(function(t){return!t.completed}).length;document.title=0===t?"Todo List":"("+t+") Todo List"}),s.start()},function(t,e,n){"use strict";function i(t){if(null===t)return null;if(t.treeType===s.Text)return document.createTextNode(t.content);var e=document.createElement(t.content.tag);for(var n in t.content.attrs)e.setAttribute(n,t.content.attrs[n]);for(var r=0;r<t.children.length;r++){var o=i(t.children[r]);e.appendChild(o)}return t.onDestroy=t.onCreate(e),e}function r(t,e){for(var n=t,r=i(e);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(r)}function o(t,e,n){if(!t.length)return e.map(function(t){return[d.Insert,null,t]});if(!e.length)return t.map(function(t){return[d.Delete,t,null]});for(var i=t.length+1,r=e.length+1,o=new Array(i*r),u=[],s=0;s<i;s++)o[s*r]=s;for(var a=0;a<r;a++)o[a]=a;for(var c=1;c<r;c++)for(var l=1;l<i;l++)n(t[l-1],e[c-1])?o[l*r+c]=o[(l-1)*r+(c-1)]:o[l*r+c]=Math.min(o[(l-1)*r+c],o[l*r+(c-1)])+1;for(var f=i-1,p=r-1;0!==f||0!==p;)n(t[f-1],e[p-1])?(f--,p--,u.unshift([d.Merge,t[f],e[p]])):o[f*r+(p-1)]<=o[(f-1)*r+p]?(p--,u.unshift([d.Insert,null,e[p]])):(f--,u.unshift([d.Delete,t[f],null]));return u}function u(t,e,n,r){if(void 0===r&&(r=0),void 0===n||null===n)return t.childNodes[r].onDestroy&&t.childNodes[r].onDestroy(),void t.removeChild(t.childNodes[r]);if(void 0===e||null===e)return void t.insertBefore(i(n),t.childNodes[r]);if(n.treeType===s.Node){if(e.treeType===s.Node&&e.content.tag===n.content.tag){var a=t.childNodes[r];for(var c in e.content.attrs)c in n.content.attrs||(a.removeAttribute(c),delete a[c]);for(var c in n.content.attrs){var l=n.content.attrs[c];c in e.content.attrs&&l===e.content.attrs[c]||(a[c]=l,a.setAttribute(c,l))}for(var f=o(e.children,n.children,function(t,e){return void 0!==t&&t.eq(e)}),p=0,h=0;h<f.length;h++){var v=f[h];u(t.childNodes[r],v[1],v[2],p),v[0]!==d.Delete&&p++}}}else t.childNodes[r].onDestroy&&t.childNodes[r].onDestroy(),t.replaceChild(i(n),t.childNodes[r])}Object.defineProperty(e,"__esModule",{value:!0});var s;!function(t){t[t.Text=0]="Text",t[t.Node=1]="Node"}(s=e.VDomType||(e.VDomType={}));var a=function(){function t(t,e,n,i){void 0===i&&(i=null),this.content=t,this.children=e,this.treeType=n,this.onCreate=i,this.onDestroy=null,n===s.Node?"key"in this.content.attrs?(this.key=this.content.attrs.key,delete this.content.attrs.key):"id"in this.content.attrs?this.key=this.content.attrs.id:this.key=this.content.tag:this.key="text-node"}return t.prototype.eq=function(t){return!!t&&this.key===t.key},t}();e.VDom=a,e.initialDOM=r;var d;!function(t){t[t.Merge=0]="Merge",t[t.Delete=1]="Delete",t[t.Insert=2]="Insert"}(d||(d={})),e.diff_array=o,e.diff_dom=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialState={tasks:[],field:"",uid:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),o=n(6),u=i.connect(function(t){return t},function(t){return{add:function(){return t(r.add())},updateField:function(e){return t(r.updateField(e))}}})(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(7),o=function(t){return i.el("section",{id:"the_app",class:"app"},[i.el("header",{id:"header",class:"header"},[i.el("h1",{key:"title"},["Obligatory Todo App"]),i.el("p",{key:"wut"},["Double-click tasks to edit them"])]),i.el("input",{type:"text",id:"field",placeholder:"What needs to be done?",on:{keydown:function(e){13===e.getRaw().keyCode&&t.add()},input:function(e){return t.updateField(e.getValue())}},value:t.field},[""]),i.el("ul",{class:"todo_list",id:"todo_list"},t.tasks.map(function(t){return r.default(t)}))])};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),o=n(8),u=i.connect(function(t){},function(t){return{delete_:function(e){return t(r.delete_(e))},toggle:function(e){return t(r.toggle(e))},edit:function(e){return t(r.edit(e))},update:function(e){return t(r.update(e))}}})(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(9),o=n(10),u=function(t){var e=t.uid,n=t.description,u=t.completed,s=t.edit,a=t.update,d=t.editing?r.default({uid:e,description:n,update:a}):o.default({uid:e,description:n,completed:u,edit:s}),c={type:"checkbox",class:"toggle",id:"check-task-"+e,on:{change:function(n){return t.toggle(e)}}};u&&(c.checked="checked");var l=[i.el("input",c),d,i.el("button",{class:"delete_button",id:"del-task-"+t.uid,on:{click:function(n){return t.delete_(e)}}})];return i.el("li",{id:"task-"+e,class:"task"},l)};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){var e=t.uid,n=t.description,r=t.update;return i.el("input",{type:"text",class:"editing",id:"edit-task-"+e,value:n,on:{keydown:function(t){if(13===t.getRaw().keyCode){var n=t.getValue();r({uid:e,text:n})}},blur:function(t){var n=t.getValue();r({uid:e,text:n})}}})};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){var e=t.uid,n=t.completed,r=t.description,o=t.edit;return i.el("label",{class:n?"completed":"task_text",id:"text-task-"+e,on:{dblclick:function(t){return o(e)}}},[r])};e.default=r},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=function(t,e){switch(e.type){case r.Actions.UpdateField:return i({},t,{field:e.data});case r.Actions.Add:return u(t);case r.Actions.Delete:return s(t,e.data);case r.Actions.Complete:return a(t,e.data);case r.Actions.Editing:return d(t,e.data);case r.Actions.UpdateTask:return c(t,e.data);default:return t}},u=function(t){var e=t.field,n=t.tasks,i=t.uid;if(""===e.trim())return{field:e,tasks:n,uid:i};var r={completed:!1,editing:!1,description:e,uid:i};return{tasks:n.concat([r]),uid:i+1,field:""}},s=function(t,e){for(var n=t.tasks,i=t.uid,r=t.field,o=-1,u=0;u<n.length;u++)if(n[u].uid===e){o=u;break}return o>-1&&n.splice(o,1),{tasks:n,uid:i,field:r}},a=function(t,e){for(var n=t.tasks,i=t.field,r=t.uid,o=n.length;o--;)if(n[o].uid===e){n[o].completed=!n[o].completed;break}return{tasks:n,field:i,uid:r}},d=function(t,e){for(var n=t.tasks,i=t.field,r=t.uid,o=n.length;o--;)if(n[o].uid===e){n[o].editing=!0;break}return{tasks:n,field:i,uid:r}},c=function(t,e){for(var n=t.tasks,i=t.field,r=t.uid,o=e.taskUid,u=e.text,s=n.length;s--;)if(n[s].uid===o){n[s].editing=!1,n[s].description=u;break}return{tasks:n,field:i,uid:r}};e.default=o}]);