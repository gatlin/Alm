!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=r(1);r(3);var i;!function(t){t[t.Increment=0]="Increment",t[t.Decrement=1]="Decrement"}(i||(i={}));var s=o.connect(function(t){return{counter:t}},function(t){return{increment:function(){return t({type:i.Increment})},decrement:function(){return t({type:i.Decrement})}}})(function(t){var e=t.counter,r=t.increment,n=t.decrement;return o.el("div",null,o.el("p",null,e.toString()),o.el("div",null,o.el("button",{on:{click:function(t){return r()}}},"Increment"),o.el("button",{on:{click:function(t){return n()}}},"Decrement")))});new o.Alm({model:0,update:function(t,e){return e.type===i.Increment?t+1:t-1},view:s(),domRoot:"counter-app",eventRoot:"counter-app"}).start();var a;!function(t){t[t.UpdateText=0]="UpdateText"}(a||(a={}));var u=function(t,e){switch(e.type){case a.UpdateText:var r=e.data;return{inputText:r,count:r.length,overLimit:r.length>140};default:return t}},c=o.connect(function(t){return t},function(t){return{updateText:function(e){return t({type:a.UpdateText,data:e})}}})(function(t){var e=(t.inputText,t.count),r=t.overLimit,n=t.updateText;return o.el("div",null,o.el("textarea",{id:"text-event",on:{input:function(t){return n(t.getValue())}}}),o.el("p",{className:r?"warning ":""},e.toString()+" / 140 characters"))});new o.Alm({model:{inputText:"Type here!",count:0,overLimit:!1},update:u,view:c(),eventRoot:"event-app",domRoot:"event-app"}).start();var f;!function(t){t[t.RequestPage=0]="RequestPage",t[t.SetPageText=1]="SetPageText",t[t.SetPageUrl=2]="SetPageUrl"}(f||(f={}));var l=function(){return function(t,e){return fetch(e().pageUrl).then(function(t){return t.text()}).then(function(e){return t({type:f.SetPageText,data:e})}).catch(function(t){console.error(t)})}},d=function(t,e){switch(e.type){case f.RequestPage:return n({},t,{requesting:!0});case f.SetPageText:return n({},t,{requesting:!1,pageText:e.data});case f.SetPageUrl:return n({},t,{pageUrl:e.data});default:return t}},h=o.connect(function(t){return t},function(t){return{setPageUrl:function(e){return t({type:f.SetPageUrl,data:e})},requestPage:function(){return t(l())}}})(function(t){return o.el("div",null,o.el("h3",null,"Load web page"),o.el("input",{type:"text",value:t.pageUrl,on:{change:function(e){return t.setPageUrl(e.getValue())}}}),o.el("button",{on:{click:function(e){return t.requestPage()}}},"Load Page"),o.el("p",null,t.requesting?"Loading ...":"Number of characters received: "+t.pageText.length))});new o.Alm({model:{pageText:"",requesting:!1,pageUrl:"http://niltag.net"},update:d,view:h(),eventRoot:"async-app",domRoot:"async-app"}).start()},function(t,e,r){"use strict";function n(t){var e=Object.keys(t);return function(r,n){for(var o=!1,i={},s=0;s<e.length;s++){var a=e[s],u=t[a],c=r[a],f=u(c,n);i[a]=f,o=o||f!==c}return o?i:r}}function o(t,e){void 0===e&&(e={});for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(n){e=null===e?{}:e;var o={};e.on&&(o=e.on,delete e.on),e.className&&(e.class=e.className,delete e.className),e.ref&&(o.ref=e.ref,delete e.ref),r=Array.isArray(r)&&Array.isArray(r[0])?r[0]:r;var i=r?r.filter(function(t){return void 0!==t}).map(function(t,e){return!t||t instanceof Array?null:"string"==typeof t?new a.VDom(t,[],a.VDomType.Text):t(n)}).filter(function(t){return null!==t}):[],u=function(t){n.handle(t,o)};return"string"==typeof t?new a.VDom({tag:t,attrs:e},i,a.VDomType.Node,u):t(s({},e,{children:i}))(n)}}function i(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),function(r){return function(n){return void 0===n&&(n={}),function(o){var i=o.store,a=i.getState(),u=t?t(a):{},c=e?e(i.dispatch.bind(i)):{},f=s({},n,u,c);return r(f)(o)}}}}var s=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=r(2);e.makeReducer=n;var u=function(){function t(t,e){this.state=t,this.reducer=e,this.subscribers=[]}return t.prototype.dispatch=function(t){return this.state=this.reducer(this.state,"function"==typeof t?t(this.dispatch.bind(this),this.getState.bind(this)):t),this.subscribers.forEach(function(t){t()}),this},t.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){var r=e.subscribers.indexOf(t);e.subscribers.splice(r,1)}},t.prototype.getState=function(){return Object.seal(this.state)},t}();e.Store=u,e.el=o;var c=function(){function t(t){this.raw=t,this.classes=t.target.className.trim().split(/\s+/g)||[],this.id=t.target.id||"",this.value=t.target.value}return t.prototype.hasClass=function(t){return-1!==this.classes.indexOf(t)},t.prototype.getClasses=function(){return this.classes},t.prototype.getId=function(){return this.id},t.prototype.getValue=function(){return this.value},t.prototype.getRaw=function(){return this.raw},t.prototype.class_in_ancestry=function(t){for(var e=null,r=!1,n=this.raw.target;!r;){if(!n.className){r=!0;break}-1!==(n.className.trim().split(/\s+/g)||[]).indexOf(t)?(e=n,r=!0):n.parentNode?n=n.parentNode:r=!0}return e},t}();e.AlmEvent=c;var f=function(){function t(t){var e=this;this.gensymnumber=0,this.handleEvent=function(t){var r=t.type;if(e.events[r]&&t.target.hasAttribute("data-alm-id")){var n=t.target.getAttribute("data-alm-id");e.events[r][n]&&e.events[r][n](new c(t))}},this.store=new u(t.model,t.update),this.eventRoot="string"==typeof t.eventRoot?document.getElementById(t.eventRoot):void 0===t.eventRoot?document:t.eventRoot,this.domRoot="string"==typeof t.domRoot?document.getElementById(t.domRoot):t.domRoot,this.view=t.view,this.events={}}return t.prototype.start=function(){var t=this;this.events={};var e=this.store,r=function(e,r){window.setTimeout(function(){var n;e.hasAttribute("data-alm-id")?n=e.getAttribute("data-alm-id"):(n=t.gensym(),e.setAttribute("data-alm-id",n)),r.ref&&(r.ref(e),delete r.ref);for(var o in r)o in t.events||(t.events[o]={},t.registerEvent(o,t.handleEvent)),t.events[o][n]=r[o];return function(){for(var e in r)delete t.events[e][n]}},0)},n={store:e,handle:r},o=this.view(n);a.initialDOM(this.domRoot,o),this.store.subscribe(function(){var e=t.view(n);a.diff_dom(t.domRoot,o,e),o=e})},t.prototype.gensym=function(){return"node-"+(this.gensymnumber++).toString()},t.prototype.registerEvent=function(t,e){this.eventRoot.addEventListener(t,e,!0)},t}();e.Alm=f,e.connect=i},function(t,e,r){"use strict";function n(t){if(null===t)return null;if(t.treeType===a.Text)return document.createTextNode(t.content);var e=document.createElement(t.content.tag);for(var r in t.content.attrs)null!==t.content.attrs[r]&&e.setAttribute(r,t.content.attrs[r]);for(var o=0;o<t.children.length;o++){var i=n(t.children[o]);e.appendChild(i)}return t.onDestroy=t.onCreate(e),e}function o(t,e){for(var r=t,o=n(e);r.firstChild;)r.removeChild(r.firstChild);r.appendChild(o)}function i(t,e,r){if(!t.length)return e.map(function(t){return[c.Insert,null,t]});if(!e.length)return t.map(function(t){return[c.Delete,t,null]});for(var n=t.length+1,o=e.length+1,i=new Array(n*o),s=[],a=0;a<n;a++)i[a*o]=a;for(var u=0;u<o;u++)i[u]=u;for(var f=1;f<o;f++)for(var l=1;l<n;l++)r(t[l-1],e[f-1])?i[l*o+f]=i[(l-1)*o+(f-1)]:i[l*o+f]=Math.min(i[(l-1)*o+f],i[l*o+(f-1)])+1;for(var d=n-1,h=o-1;d>0&&h>0;)r(t[d-1],e[h-1])?(d--,h--,s.unshift([c.Merge,t[d],e[h]])):i[d*o+(h-1)]<=i[(d-1)*o+h]?(h--,s.unshift([c.Insert,null,e[h]])):(d--,s.unshift([c.Delete,t[d],null]));if(d>0&&0===h)for(;d>=0;d--)s.unshift([c.Delete,t[d],null]);if(h>0&&0===d)for(;h>=0;h--)s.unshift([c.Insert,null,e[h]]);return s}function s(t,e,r,o){if(void 0===o&&(o=0),void 0===r||null===r)return void(t.childNodes[o]&&(t.childNodes[o].onDestroy&&t.childNodes[o].onDestroy(),t.removeChild(t.childNodes[o])));if(void 0===e||null===e)return void t.insertBefore(n(r),t.childNodes[o]);if(r.treeType===a.Node){if(e.treeType===a.Node&&e.content.tag===r.content.tag){var u=t.childNodes[o];for(var f in e.content.attrs)f in r.content.attrs||(u.removeAttribute(f),delete u[f]);for(var f in r.content.attrs){var l=r.content.attrs[f];f in e.content.attrs&&l===e.content.attrs[f]||(u[f]=l,u.setAttribute(f,l))}window.setTimeout(function(){u.hasAttribute("value")&&(u.value=u.getAttribute("value"))},0);for(var d=i(e.children,r.children,function(t,e){return void 0!==t&&t.eq(e)}),h=0,p=0;p<d.length;p++){var y=d[p];s(t.childNodes[o],y[1],y[2],h),y[0]!==c.Delete&&h++}}}else t.childNodes[o].onDestroy&&t.childNodes[o].onDestroy(),t.replaceChild(n(r),t.childNodes[o])}Object.defineProperty(e,"__esModule",{value:!0});var a;!function(t){t[t.Text=0]="Text",t[t.Node=1]="Node"}(a=e.VDomType||(e.VDomType={}));var u=function(){function t(t,e,r,n){void 0===n&&(n=null),this.content=t,this.children=e,this.treeType=r,this.onCreate=n,this.onDestroy=null,r===a.Node?"key"in this.content.attrs?(this.key=this.content.attrs.key,delete this.content.attrs.key):"id"in this.content.attrs?this.key=this.content.attrs.id:this.key=this.content.tag:this.key="text-node"}return t.prototype.setChildren=function(t){return this.children=t,this},t.prototype.eq=function(t){return!!t&&this.key===t.key},t}();e.VDom=u,e.initialDOM=o;var c;!function(t){t[t.Merge=0]="Merge",t[t.Delete=1]="Delete",t[t.Insert=2]="Insert"}(c=e.Op||(e.Op={})),e.diff_array=i,e.diff_dom=s},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function c(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&g(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(t){var e=t.toUpperCase();return T.indexOf(e)>-1?e:t}function h(t,e){e=e||{};var r=e.body;if(t instanceof h){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=d(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t){var e=new o;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&b.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},l.call(h.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];v.redirect=function(t,e){if(-1===x.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=h,t.Response=v,t.fetch=function(t,e){return new Promise(function(r,n){var o=new h(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new v(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&m.blob&&(i.responseType="blob"),o.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)}]);