!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o,i=n(1);!function(t){t[t.Increment=0]="Increment",t[t.Decrement=1]="Decrement"}(o||(o={}));var u=function(t){var e=t.counter,n=t.increment,r=t.decrement;return i.el("div",null,i.el("p",null,e.toString()),i.el("div",null,i.el("button",{on:{click:function(t){return n()}}},"Increment"),i.el("button",{on:{click:function(t){return r()}}},"Decrement")))},a=i.connect(function(t){return{counter:t}},function(t){return{increment:function(){return t({type:o.Increment})},decrement:function(){return t({type:o.Decrement})}}})(u);new i.Alm({model:0,update:function(t,e){return e.type===o.Increment?t+1:t-1},view:a(),domRoot:"counter-app",eventRoot:"counter-app"}).start();var s;!function(t){t[t.UpdateText=0]="UpdateText"}(s||(s={}));var c=function(t,e){switch(e.type){case s.UpdateText:var n=e.data;return{inputText:n,count:n.length,overLimit:n.length>140};default:return t}},l=function(t){var e=(t.inputText,t.count),n=t.overLimit,r=t.updateText;return i.el("div",{},i.el("textarea",{id:"text-event",on:{input:function(t){return r(t.getValue())}}}),i.el("p",{class:n?"warning ":""},e.toString()+" / 140 characters"))},d=i.connect(function(t){return t},function(t){return{updateText:function(e){return t({type:s.UpdateText,data:e})}}})(l);new i.Alm({model:{inputText:"Type here!",count:0,overLimit:!1},update:c,view:d(),eventRoot:"event-app",domRoot:"event-app"}).start();var f;!function(t){t[t.RequestPage=0]="RequestPage",t[t.SetPageText=1]="SetPageText",t[t.SetPageUrl=2]="SetPageUrl"}(f||(f={}));var p=function(t){return{type:f.SetPageUrl,data:t}},h=function(t){return{type:f.SetPageText,data:t}},v=function(){return function(t,e){var n=new XMLHttpRequest;return n.open("GET",e().pageUrl,!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&t(h(n.responseText))},n.send(),{type:f.RequestPage}}},g=function(t,e){switch(e.type){case f.RequestPage:return r({},t,{requesting:!0});case f.SetPageText:return r({},t,{requesting:!1,pageText:e.data});case f.SetPageUrl:return r({},t,{pageUrl:e.data});default:return t}},m=function(t){return i.el("div",{},i.el("h3",{},"Load web page"),i.el("input",{type:"text",value:t.pageUrl,on:{input:function(e){return t.setPageUrl(e.getValue())}}}),i.el("button",{on:{click:function(e){return t.requestPage()}}},"Load Page"),i.el("p",{},t.requesting?"Loading ...":"Number of characters received: "+t.pageText.length))},y=i.connect(function(t){return t},function(t){return{setPageUrl:function(e){return t(p(e))},requestPage:function(){return t(v())},setPageText:function(e){return t(h(e))}}})(m);new i.Alm({model:{pageText:"",requesting:!1,pageUrl:"http://niltag.net"},update:g,view:y(),eventRoot:"async-app",domRoot:"async-app"}).start()},function(t,e,n){"use strict";function r(t){var e=Object.keys(t);return function(n,r){for(var o=!1,i={},u=0;u<e.length;u++){var a=e[u],s=t[a],c=n[a],l=s(c,r);i[a]=l,o=o||l!==c}return o?i:n}}function o(t,e){void 0===e&&(e={});for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(r){e=null===e?{}:e;var o={};e.on&&(o=e.on,delete e.on),e.className&&(e.class=e.className,delete e.className),e.ref&&(o.ref=e.ref,delete e.ref),n=Array.isArray(n)&&Array.isArray(n[0])?n[0]:n;var i=n?n.filter(function(t){return void 0!==t}).map(function(t,e){return!t||t instanceof Array?null:"string"==typeof t?new a.VDom(t,[],a.VDomType.Text):t(r)}).filter(function(t){return null!==t}):[],s=function(t){r.handle(t,o)},c="string"==typeof t?new a.VDom({tag:t,attrs:e},i,a.VDomType.Node,s):t(u({},e,{children:i}))(r);return console.log("view",c),c}}function i(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),function(n){return function(r){return void 0===r&&(r={}),function(o){var i=o.store,a=i.getState(),s=t?t(a):{},c=e?e(i.dispatch.bind(i)):{},l=u({},r,s,c);return n(l)(o)}}}}var u=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e.makeReducer=r;var s=function(){function t(t,e){this.state=t,this.reducer=e,this.subscribers=[]}return t.prototype.dispatch=function(t){return this.state=this.reducer(this.state,"function"==typeof t?t(this.dispatch.bind(this),this.getState.bind(this)):t),this.subscribers.forEach(function(t){t()}),this},t.prototype.subscribe=function(t){var e=this;return this.subscribers.push(t),function(){var n=e.subscribers.indexOf(t);e.subscribers.splice(n,1)}},t.prototype.getState=function(){return Object.seal(this.state)},t}();e.Store=s,e.el=o;var c=function(){function t(t){this.raw=t,this.classes=t.target.className.trim().split(/\s+/g)||[],this.id=t.target.id||"",this.value=t.target.value}return t.prototype.hasClass=function(t){return-1!==this.classes.indexOf(t)},t.prototype.getClasses=function(){return this.classes},t.prototype.getId=function(){return this.id},t.prototype.getValue=function(){return this.value},t.prototype.getRaw=function(){return this.raw},t.prototype.class_in_ancestry=function(t){for(var e=null,n=!1,r=this.raw.target;!n;){if(!r.className){n=!0;break}-1!==(r.className.trim().split(/\s+/g)||[]).indexOf(t)?(e=r,n=!0):r.parentNode?r=r.parentNode:n=!0}return e},t}();e.AlmEvent=c;var l=function(){function t(t){var e=this;this.gensymnumber=0,this.handleEvent=function(t){var n=t.type;if(e.events[n]&&t.target.hasAttribute("data-alm-id")){var r=t.target.getAttribute("data-alm-id");e.events[n][r]&&e.events[n][r](new c(t))}},this.store=new s(t.model,t.update),this.eventRoot="string"==typeof t.eventRoot?document.getElementById(t.eventRoot):void 0===t.eventRoot?document:t.eventRoot,this.domRoot="string"==typeof t.domRoot?document.getElementById(t.domRoot):t.domRoot,this.view=t.view,this.events={}}return t.prototype.start=function(){var t=this;this.events={};var e=this.store,n=function(e,n){window.setTimeout(function(){var r;e.hasAttribute("data-alm-id")?r=e.getAttribute("data-alm-id"):(r=t.gensym(),e.setAttribute("data-alm-id",r)),n.ref&&(n.ref(e),delete n.ref);for(var o in n)o in t.events||(t.events[o]={},t.registerEvent(o,t.handleEvent)),t.events[o][r]=n[o];return function(){for(var e in n)delete t.events[e][r]}},0)},r={store:e,handle:n},o=this.view(r);a.initialDOM(this.domRoot,o),this.store.subscribe(function(){var e=t.view(r);a.diff_dom(t.domRoot,o,e),o=e})},t.prototype.gensym=function(){return"node-"+(this.gensymnumber++).toString()},t.prototype.registerEvent=function(t,e){this.eventRoot.addEventListener(t,e,!0)},t}();e.Alm=l,e.connect=i},function(t,e,n){"use strict";function r(t){if(null===t)return null;if(t.treeType===a.Text)return document.createTextNode(t.content);var e=document.createElement(t.content.tag);for(var n in t.content.attrs)null!==t.content.attrs[n]&&e.setAttribute(n,t.content.attrs[n]);for(var o=0;o<t.children.length;o++){var i=r(t.children[o]);e.appendChild(i)}return t.onDestroy=t.onCreate(e),e}function o(t,e){for(var n=t,o=r(e);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o)}function i(t,e,n){if(!t.length)return e.map(function(t){return[c.Insert,null,t]});if(!e.length)return t.map(function(t){return[c.Delete,t,null]});for(var r=t.length+1,o=e.length+1,i=new Array(r*o),u=[],a=0;a<r;a++)i[a*o]=a;for(var s=0;s<o;s++)i[s]=s;for(var l=1;l<o;l++)for(var d=1;d<r;d++)n(t[d-1],e[l-1])?i[d*o+l]=i[(d-1)*o+(l-1)]:i[d*o+l]=Math.min(i[(d-1)*o+l],i[d*o+(l-1)])+1;for(var f=r-1,p=o-1;f>0&&p>0;)n(t[f-1],e[p-1])?(f--,p--,u.unshift([c.Merge,t[f],e[p]])):i[f*o+(p-1)]<=i[(f-1)*o+p]?(p--,u.unshift([c.Insert,null,e[p]])):(f--,u.unshift([c.Delete,t[f],null]));if(f>0&&0===p)for(;f>=0;f--)u.unshift([c.Delete,t[f],null]);if(p>0&&0===f)for(;p>=0;p--)u.unshift([c.Insert,null,e[p]]);return u}function u(t,e,n,o){if(void 0===o&&(o=0),void 0===n||null===n)return void(t.childNodes[o]&&(t.childNodes[o].onDestroy&&t.childNodes[o].onDestroy(),t.removeChild(t.childNodes[o])));if(void 0===e||null===e)return void t.insertBefore(r(n),t.childNodes[o]);if(n.treeType===a.Node){if(e.treeType===a.Node&&e.content.tag===n.content.tag){var s=t.childNodes[o];for(var l in e.content.attrs)l in n.content.attrs||(s.removeAttribute(l),delete s[l]);for(var l in n.content.attrs){var d=n.content.attrs[l];l in e.content.attrs&&d===e.content.attrs[l]||(s[l]=d,s.setAttribute(l,d))}window.setTimeout(function(){s.hasAttribute("value")&&(s.value=s.getAttribute("value"))},0);for(var f=i(e.children,n.children,function(t,e){return void 0!==t&&t.eq(e)}),p=0,h=0;h<f.length;h++){var v=f[h];u(t.childNodes[o],v[1],v[2],p),v[0]!==c.Delete&&p++}}}else t.childNodes[o].onDestroy&&t.childNodes[o].onDestroy(),t.replaceChild(r(n),t.childNodes[o])}Object.defineProperty(e,"__esModule",{value:!0});var a;!function(t){t[t.Text=0]="Text",t[t.Node=1]="Node"}(a=e.VDomType||(e.VDomType={}));var s=function(){function t(t,e,n,r){void 0===r&&(r=null),this.content=t,this.children=e,this.treeType=n,this.onCreate=r,this.onDestroy=null,n===a.Node?"key"in this.content.attrs?(this.key=this.content.attrs.key,delete this.content.attrs.key):"id"in this.content.attrs?this.key=this.content.attrs.id:this.key=this.content.tag:this.key="text-node"}return t.prototype.setChildren=function(t){return this.children=t,this},t.prototype.eq=function(t){return!!t&&this.key===t.key},t}();e.VDom=s,e.initialDOM=o;var c;!function(t){t[t.Merge=0]="Merge",t[t.Delete=1]="Delete",t[t.Insert=2]="Insert"}(c=e.Op||(e.Op={})),e.diff_array=i,e.diff_dom=u}]);