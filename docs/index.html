<!doctype html>
<html lang='en_US'>
    <head>
        <meta charset='utf-8'>
        <title>Alm</title>
        <link href="css/main.css" rel="stylesheet" media="all">
        <link rel="stylesheet"
              href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <h1>Alm</h1>
        <div id="column-container">
            <div class="row">
                <p class="lead">This is a website for
                    <a href="https://github.com/gatlin/alm">Alm a neat web
                        application framework I made.</a> The README on GitHub
                    has a lot of information. You can also see
                    <a href="todo.html">a more involved, obligatory todo list
                        app</a> as well as
                    <a
                        href="https://github.com/gatlin/Alm/blob/master/docs/js/src/todo.js">its
                        code</a>.</p>
                <p class="lead">
                    This page is a simple tutorial showing a few small apps and
                    how they work and can grow maintainably thanks to Alm.
                </p>
                <p class="lead">If you have any questions or comments or free
                    money don't hesitate to reach me at
                    <a href="mailto:gatlin@niltag.net">gatlin@niltag.net</a>.</p>
            </div>
            <div class="row">
                <div class="explanation">
                    <h2>Simple example: a little counter.</h2>
                    <p class="explain">
                        An <span class="lit">App</span> asks for the following
                        right up front:
                        <ul>
                            <li>Your application's initial <em>state</em>;</li>
                            <li>How to take an <em>action</em> and a state to
                                <strong>update</strong> it;</li>
                            <li>How to transform browser <em>events</em> into
                                <em>actions</em>;</li>
                            <li>How to <strong>render</strong> the view given a
                                <em>state</em>;</li>
                            <li>Where in the <em>document hierarchy</em> to
                                listen for events and render the view.</li>
                        </ul>
                    </p>
                    <p class="explain">
                        The <span class="lit">alm.el</span> function is how you
                        specify your view. It takes a tag name, an object of
                        element properties, and an array of children. If a child
                        is a <strong>string</strong> it will become a text node.
                    </p>
                    <p class="explain">
                        The <span class="lit">main</span> function connects
                        <em>events</em> and other <em>signals</em>, ultimately
                        sending messages to
                        <span class="lit">scope.actions</span>. Messages can be
                        whatever you want - after all, you're going to be
                        receiving them in
                        <span class="lit">update</span>!
                    </p>
                    <p class="explain">
                        <strong>Signals</strong> are how data flows through your
                        app. An important one is the <em>port</em>.
                    </p>
                </div>
                <div class="example" id="src-1">
                    <div id="app-1" class="app"></div>
                    <pre>
                        <code>
/* A simple counter */
const el = alm.el;
const app1 = new alm.App({
    state: 0,
    update: (action, num) => num + (action ? 1 : -1),
    main: scope => {
        scope.events.click
            .filter(evt => evt.getId() === 'up-btn')
            .recv(evt => scope.actions.send(true));

        scope.events.click
            .filter(evt => evt.getId() === 'down-btn')
            .recv(evt => scope.actions.send(false));
    },
    render: state =>
        el('div', { 'id':'app-1-main' }, [
            el('h3', { 'class':'app-1-header' }, [state.toString()]),
            el('span', {}, [
                el('button', { 'id':'up-btn' }, ['+1']),
                el('button', { 'id':'down-btn' }, ['-1'])
            ])
        ]),
    eventRoot: 'app-1',
    domRoot: 'app-1'
}).start();
                        </code>
                    </pre>
                </div>
            </div><!-- row -->
            <div class="row">
                <div class="explanation">
                    <h2>A colorful port example</h2>
                    <p class="explain">
                        You can communicate outside your
                        <span class="lit">App</span> using <em>ports</em>. You
                        can specify them using the
                        <span class="lit">ports</span> property.
                    </p>
                    <p class="explain">
                        
                    </p>
                </div>
                <div class="example">
                    <div id="app-2" class="app"></div>
                    <pre><code>
const app2 = new alm.App({
    state: '#ffffff',
    update: (value, state) => value,
    ports: {
        outbound: ['background']
    },
    main: scope => {
        scope.events.input
            .filter(evt => evt.getId() === 'app2-color')
            .recv(evt => scope.actions.send(
                evt.getRaw().target.value));

        scope.events.click
            .filter(evt => evt.getId() === 'app2-reset')
            .recv(_ => scope.actions.send('#ffffff'));

        scope.state.connect(scope.ports.outbound.background);
    },
    render: state =>
        el('span', {}, [
            el('input', { 'type':'color',
                          'id':'app2-color',
                          'value':state }),
            el('button', { 'id':'app2-reset' }, ['Reset'])
        ]),
    eventRoot: 'app-2',
    domRoot: 'app-2'
}).start();

app2.ports.outbound.background.recv(color => {
    document.body.style.backgroundColor = color;
});
                    </code></pre>
                </div>
            </div><!-- row -->
        </div>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="js/dist/main.js"></script>
    </body>
</html>
